<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validaciones</title>
    <style>
       
        .validacion {
            margin-bottom: 20px;
        }
        .resultado {
            width: 20px;
            height: 20px;
            display: inline-block;
            margin-left: 10px;
        }
        .resultado img {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>

    <h1>Validaciones</h1>

    <div class="validacion">
        <p>Fecha y hora de creación (formato: dd/mm/aaaa hh:mm):</p>
        <input type="text" id="fechaHora" placeholder="Ej. 21/01/2025 14:30">
        <button onclick="validarFechaHora()">Validar</button>
        <div id="resultadoFechaHora" class="resultado"></div>
    </div>

    <div class="validacion">
        <p>Remitente (formato: AA$1234):</p>
        <input type="text" id="remitente" placeholder="Ej. WW$1234">
        <button onclick="validar('remitente', regexRemitente)">Validar</button>
        <div id="resultadoRemitente" class="resultado"></div>
    </div>

    <div class="validacion">
        <p>Destinatario (formato: CM_galapagar:28260):</p>
        <input type="text" id="destinatario" placeholder="Ej. CM_galapagar:28260">
        <button onclick="validar('destinatario', regexDestinatario)">Validar</button>
        <div id="resultadoDestinatario" class="resultado"></div>
    </div>

    <div class="validacion">
        <p>Gramos (número entre 1000 y 5000):</p>
        <input type="text" id="gramos" placeholder="Ej. 2000">
        <button onclick="validar('gramos', regexGramos)">Validar</button>
        <div id="resultadoGramos" class="resultado"></div>
    </div>

    <div class="validacion">
        <p>Composición (ej. 200gC3OH7):</p>
        <input type="text" id="composicion" placeholder="Ej. 200gC3OH7">
        <button onclick="validar('composicion', regexComposicion)">Validar</button>
        <div id="resultadoComposicion" class="resultado"></div>
    </div>

    <script>
        const regexRemitente = /^[A-Z]{2}\$\d{4}$/;
        const regexDestinatario = /^[A-Z]{2,3}_[a-z]+:\d{5}$/;
        const regexGramos = /^(1000|[12][0-9]{3}|3000|4000|5000)$/;
        const regexComposicion = /^\d+g([A-Za-z]{1,2}\d?){2}$/;

        function validarFechaHora() {
            var valor = document.getElementById("fechaHora").value;
            var resultado = document.getElementById("resultadoFechaHora");

            var regexFechaHora = /^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4} (\d{2}):([0-5][0-9])$/;
            if (!regexFechaHora.test(valor)) {
                resultado.innerHTML = '<img src="cross.png" alt="Incorrecto">';
                return;
            }

            var [fecha, hora] = valor.split(" ");
            var [dia, mes, anio] = fecha.split("/").map(Number);
            var [horas, minutos] = hora.split(":").map(Number);

            if (horas < 0 || horas > 23 || minutos < 0 || minutos > 59) {
                resultado.innerHTML = '<img src="cross.png" alt="Incorrecto">';
                return;
            }

            const esFechaValida = validarFecha(dia, mes, anio);
            resultado.innerHTML = esFechaValida ? '<img src="tick.png" alt="Correcto">' : '<img src="cross.png" alt="Incorrecto">';
        }

        function validarFecha(dia, mes, anio) {
            const diasPorMes = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];

            if (mes === 2 && ((anio % 4 === 0 && anio % 100 !== 0) || anio % 400 === 0)) {
                diasPorMes[1] = 29;
            }

            return mes >= 1 && mes <= 12 && dia >= 1 && dia <= diasPorMes[mes - 1];
        }
        function validar(campoId, regex) {
            var valor = document.getElementById(campoId).value;
            var resultado = document.getElementById("resultado" + campoId.charAt(0).toUpperCase() + campoId.substring(1));

            if (regex.test(valor)) {
                resultado.innerHTML = '<img src="tick.png" alt="Correcto">';
            } else {
                resultado.innerHTML = '<img src="cross.png" alt="Incorrecto">';
            }
        }
    </script>

</body>
</html>
